{"ast":null,"code":"var _jsxFileName = \"/home/piotr/AttendanceListReact/attendance-list/src/teacher/Teacher.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport '../styles/user.css';\nimport Avatar from '@mui/material/Avatar';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction stringToColor(string) {\n  let hash = 0;\n  let i;\n  /* eslint-disable no-bitwise */\n\n  for (i = 0; i < string.length; i += 1) {\n    hash = string.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  let color = '#';\n\n  for (i = 0; i < 3; i += 1) {\n    const value = hash >> i * 8 & 0xff;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  /* eslint-enable no-bitwise */\n\n\n  return color;\n}\n\nfunction stringAvatar(name) {\n  return {\n    sx: {\n      bgcolor: stringToColor(name),\n      width: 80,\n      height: 80,\n      margin: 'auto',\n      fontSize: 32\n    },\n    children: `${name.split(' ')[0][0]}${name.split(' ')[1][0]}`\n  };\n}\n\nfunction dateFormat(date) {\n  let day = String(date.getDate()).padStart(2, '0');\n  let month = String(date.getMonth() + 1).padStart(2, '0');\n  let year = date.getFullYear();\n  let hour = String(date.getHours()).padStart(2, '0');\n  let minutes = String(date.getMinutes()).padStart(2, '0');\n  return `${year}-${month}-${day}T${hour}:${minutes}`;\n}\n\nexport default function Home() {\n  _s();\n\n  let {\n    id\n  } = useParams();\n  useEffect(() => {\n    getData();\n  }, []);\n  const [user, setUser] = useState({});\n  const [groups, setGroup] = useState([]);\n  const [groupsID, setGroupID] = useState({});\n  const [students, setStudents] = useState([]);\n  const [otherStudents, setOtherStudents] = useState({});\n  const [attendance, setAttendances] = useState({});\n\n  const getData = async () => {\n    let response = await axios.get(`http://${window.location.hostname}:8080/api/user/${id}`);\n    console.log(response);\n    setUser(response.data);\n    let idOfGroup = response.data.groupID;\n    response = await axios.get(`http://${window.location.hostname}:8080/api/group`);\n    let group_names = [];\n    let groupIDs = {};\n    response.data.forEach(element => {\n      group_names.push(element.name);\n      groupIDs[element.name] = element.id;\n    });\n    setGroupID(groupIDs);\n    setGroup(group_names);\n    response = await axios.get(`http://${window.location.hostname}:8080/api/user`);\n    setStudents(response.data);\n    let other = {};\n    let studentsOfGroup = {};\n    response.data.forEach(element => {\n      if (element.groupID !== idOfGroup && element.role === 'student') other[element.firstName + ' ' + element.lastName] = element.id;else if (element.groupID === idOfGroup && element.role === 'student') {\n        studentsOfGroup[element.id] = element;\n      }\n    });\n    setOtherStudents(other);\n    response = await axios.get(`http://${window.location.hostname}:8080/api/attendance`);\n    console.log(response);\n    let attendancesDict = {};\n    response.data.forEach(element => {\n      let key = `${element.attendanceFrom} - ${element.attendanceTo} - ${element.nameOfSubject}`;\n      if (studentsOfGroup[element.studentID] === undefined) return;\n\n      if (Object.keys(attendancesDict).includes(key)) {\n        attendancesDict[key].push({\n          firstName: studentsOfGroup[element.studentID].firstName,\n          lastName: studentsOfGroup[element.studentID].lastName,\n          status: element.attendanceStatus\n        });\n      } else {\n        attendancesDict[key] = [{\n          firstName: studentsOfGroup[element.studentID].firstName,\n          lastName: studentsOfGroup[element.studentID].lastName,\n          status: element.attendanceStatus\n        }];\n      }\n    });\n    console.log(attendancesDict);\n    setAttendances(attendancesDict);\n  };\n\n  const handleCreate = async groupName => {\n    let xd = {\n      name: groupName\n    };\n    console.log(xd);\n    const response = await axios.post(`http://${window.location.hostname}:8080/api/group`, xd, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(response);\n    alert(`Group: ${response.data.name} created!`);\n    getData();\n  };\n\n  const handleAssign = async groupName => {\n    let xd = user;\n    xd.groupID = groupsID[groupName];\n    console.log(xd);\n    const response = await axios.put(`http://${window.location.hostname}:8080/api/user`, xd, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(response);\n    getData();\n  };\n\n  const handleDelete = async student => {\n    student.groupID = null;\n    console.log(student);\n\n    if (window.confirm(`Student ${student.firstName} ${student.lastName} will be deleted!`)) {\n      const response = await axios.put(`http://${window.location.hostname}:8080/api/user`, student, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log(response);\n    }\n\n    getData();\n  };\n\n  const handleAdd = async student => {\n    console.log(otherStudents[student]);\n    let xd = {};\n    students.forEach(element => {\n      if (otherStudents[student] === element.id) {\n        xd = element;\n        xd.groupID = user.groupID;\n      }\n    });\n    console.log(xd);\n    const response = await axios.put(`http://${window.location.hostname}:8080/api/user`, xd, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(response);\n    getData();\n  };\n\n  const handleAddAttendance = async () => {\n    let subject = document.getElementById('subjectName').value;\n    let attFrom = document.getElementById('attFrom').value;\n    let attTo = document.getElementById('attTo').value;\n\n    if (subject === '') {\n      window.alert('Subject cannot be empty!');\n      return;\n    }\n\n    let att = {\n      nameOfSubject: subject,\n      attendanceFrom: attFrom.replaceAll('T', ' ').replaceAll('-', '/'),\n      attendanceTo: attTo.replaceAll('T', ' ').replaceAll('-', '/')\n    };\n    const response = await axios.post(`http://${window.location.hostname}:8080/api/attendance/${user.groupID}`, att, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(response);\n    getData();\n  };\n\n  const handleDeleteAttendance = async key => {\n    let values = key.split(' - ');\n    let attendance = {\n      nameOfSubject: values[2],\n      attendanceFrom: values[0],\n      attendanceTo: values[1]\n    };\n    console.log(attendance);\n    await axios.delete(`http://${window.location.hostname}:8080/api/attendance/`, {\n      data: attendance,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    getData();\n  };\n\n  const currentDate = new Date();\n  console.log(dateFormat(currentDate));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: 64,\n            fontWeight: 300,\n            marginBottom: 20,\n            display: 'block'\n          },\n          children: \" ATList \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Avatar, { ...stringAvatar(user.firstName + ' ' + user.lastName)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), user.firstName, \" \", user.lastName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 44\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: 28,\n            fontWeight: 300\n          },\n          children: [\" \", groups[user.groupID - 1], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"groups\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          paddingBottom: 0\n        },\n        children: \"Group management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"name\",\n          label: \"Group name\",\n          type: \"name\",\n          variant: \"standard\",\n          style: {\n            margin: '10px 10px 10px calc(1em + 10px)',\n            verticalAlign: 'inherit',\n            width: 300\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: () => handleCreate(document.getElementById('name').value),\n          children: \"Create Group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: 'left'\n          },\n          children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n            id: \"assign_group\",\n            options: groups,\n            disableClearable: true,\n            renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n              label: \"Group name\",\n              variant: \"standard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this),\n            style: {\n              margin: '10px 10px 10px calc(1em + 10px)',\n              verticalAlign: 'inherit',\n              width: 300\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"error\",\n          style: {\n            float: 'left',\n            margin: '23px 0'\n          },\n          variant: \"outlined\",\n          onClick: () => handleAssign(document.getElementById('assign_group').value),\n          children: \"delete group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"change\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: 'left'\n          },\n          children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n            id: \"assign_group\",\n            options: groups,\n            disableClearable: true,\n            renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n              label: \"Group name\",\n              variant: \"standard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this),\n            style: {\n              margin: '10px 10px 10px calc(1em + 10px)',\n              verticalAlign: 'inherit',\n              width: 300\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            float: 'left',\n            margin: '23px 0'\n          },\n          variant: \"outlined\",\n          onClick: () => handleAssign(document.getElementById('assign_group').value),\n          children: \"Change group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"students\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your students\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), students.map(element => {\n        if (element.role === 'student' && user.groupID !== null && element.groupID === user.groupID) return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student\",\n          children: [element.firstName, \" \", element.lastName, /*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              position: 'absolute',\n              right: 5\n            },\n            variant: \"outlined\",\n            color: \"error\",\n            onClick: () => handleDelete(element),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this);else return null;\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          float: 'left'\n        },\n        children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n          id: \"add_student\",\n          options: Object.keys(otherStudents),\n          disableClearable: true,\n          renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n            label: \"Student\",\n            variant: \"standard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this),\n          style: {\n            margin: 10,\n            verticalAlign: 'inherit',\n            width: 260\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          position: 'absolute',\n          right: 20,\n          margin: '23px 0'\n        },\n        variant: \"contained\",\n        onClick: () => handleAdd(document.getElementById('add_student').value),\n        children: \"add student\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"attendances\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Attendance list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        required: true,\n        label: \"Subject Name\",\n        id: \"subjectName\",\n        type: \"name\",\n        variant: \"standard\",\n        style: {\n          margin: '10px 10px 10px 1em',\n          verticalAlign: 'inherit',\n          width: 200\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"attFrom\",\n        label: \"Attendance From\",\n        type: \"datetime-local\",\n        defaultValue: dateFormat(currentDate),\n        sx: {\n          width: 250\n        },\n        InputLabelProps: {\n          shrink: true\n        },\n        style: {\n          margin: 10,\n          verticalAlign: 'inherit',\n          width: 250\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"attTo\",\n        label: \"Attendance To\",\n        type: \"datetime-local\",\n        defaultValue: dateFormat(currentDate),\n        sx: {\n          width: 250\n        },\n        InputLabelProps: {\n          shrink: true\n        },\n        style: {\n          margin: 10,\n          verticalAlign: 'inherit',\n          width: 250\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: handleAddAttendance,\n        children: \"add attendance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: Object.keys(attendance).map(key => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-header\",\n            children: [/*#__PURE__*/_jsxDEV(CalendarTodayIcon, {\n              style: {\n                transform: 'translateY(2px)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 19\n            }, this), \" \", key, /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                position: 'absolute',\n                right: 5\n              },\n              variant: \"outlined\",\n              color: \"error\",\n              onClick: () => handleDeleteAttendance(key),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 19\n            }, this), attendance[key].map(value => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-cell\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"names\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontWeight: 400\n                    },\n                    children: [Object.values(attendance[key]).indexOf(value) + 1, \".\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 27\n                  }, this), \" \", value.firstName, \" \", value.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"status\",\n                  children: value.status === null ? ' ? ' : value.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 23\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"xsMoBmgeIoBHW/68CRQT6TJXWHs=\", false, function () {\n  return [useParams];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/piotr/AttendanceListReact/attendance-list/src/teacher/Teacher.js"],"names":["React","useEffect","useState","axios","useParams","Button","TextField","Autocomplete","Avatar","CalendarTodayIcon","stringToColor","string","hash","i","length","charCodeAt","color","value","toString","substr","stringAvatar","name","sx","bgcolor","width","height","margin","fontSize","children","split","dateFormat","date","day","String","getDate","padStart","month","getMonth","year","getFullYear","hour","getHours","minutes","getMinutes","Home","id","getData","user","setUser","groups","setGroup","groupsID","setGroupID","students","setStudents","otherStudents","setOtherStudents","attendance","setAttendances","response","get","window","location","hostname","console","log","data","idOfGroup","groupID","group_names","groupIDs","forEach","element","push","other","studentsOfGroup","role","firstName","lastName","attendancesDict","key","attendanceFrom","attendanceTo","nameOfSubject","studentID","undefined","Object","keys","includes","status","attendanceStatus","handleCreate","groupName","xd","post","headers","alert","handleAssign","put","handleDelete","student","confirm","handleAdd","handleAddAttendance","subject","document","getElementById","attFrom","attTo","att","replaceAll","handleDeleteAttendance","values","delete","currentDate","Date","fontWeight","marginBottom","display","paddingBottom","verticalAlign","float","params","map","position","right","shrink","transform","indexOf"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from 'react'\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport '../styles/user.css'\nimport Avatar from '@mui/material/Avatar';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nfunction stringToColor(string) {\n  let hash = 0;\n  let i;\n\n  /* eslint-disable no-bitwise */\n  for (i = 0; i < string.length; i += 1) {\n    hash = string.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  let color = '#';\n\n  for (i = 0; i < 3; i += 1) {\n    const value = (hash >> (i * 8)) & 0xff;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  /* eslint-enable no-bitwise */\n\n  return color;\n}\n\nfunction stringAvatar(name) {\n  return {\n    sx: {\n      bgcolor: stringToColor(name),\n      width: 80,\n      height: 80,\n      margin: 'auto',\n      fontSize: 32\n    },\n    children: `${name.split(' ')[0][0]}${name.split(' ')[1][0]}`,\n  };\n}\nfunction dateFormat(date) {\n  let day = String(date.getDate()).padStart(2, '0')\n  let month = String(date.getMonth() + 1).padStart(2, '0')\n  let year = date.getFullYear()\n  let hour = String(date.getHours()).padStart(2, '0')\n  let minutes = String(date.getMinutes()).padStart(2, '0')\n  return `${year}-${month}-${day}T${hour}:${minutes}`\n}\n\nexport default function Home() {\n  let { id } = useParams()\n  useEffect(() => {\n    getData();\n  }, []);\n  const [user, setUser] = useState({});\n  const [groups, setGroup] = useState([]);\n  const [groupsID, setGroupID] = useState({});\n  const [students, setStudents] = useState([]);\n  const [otherStudents, setOtherStudents] = useState({});\n  const [attendance, setAttendances] = useState({});\n\n\n  const getData = async () => {\n    let response = await axios.get(`http://${window.location.hostname}:8080/api/user/${id}`)\n    console.log(response)\n    setUser(response.data)\n    let idOfGroup = response.data.groupID\n    response = await axios.get(`http://${window.location.hostname}:8080/api/group`)\n\n    let group_names = [];\n    let groupIDs = {}\n    response.data.forEach(element => {\n      group_names.push(element.name)\n      groupIDs[element.name] = element.id\n    });\n    setGroupID(groupIDs)\n    setGroup(group_names)\n    response = await axios.get(`http://${window.location.hostname}:8080/api/user`)\n    setStudents(response.data)\n    let other = {}\n    let studentsOfGroup = {}\n    response.data.forEach(element => {\n      if (element.groupID !== idOfGroup && element.role === 'student')\n        other[element.firstName + ' ' + element.lastName] = element.id\n      else if (element.groupID === idOfGroup && element.role === 'student') {\n        studentsOfGroup[element.id] = element\n      }\n    });\n\n    setOtherStudents(other)\n    response = await axios.get(`http://${window.location.hostname}:8080/api/attendance`)\n    console.log(response)\n    let attendancesDict = {}\n\n    response.data.forEach(element => {\n      let key = `${element.attendanceFrom} - ${element.attendanceTo} - ${element.nameOfSubject}`\n      if (studentsOfGroup[element.studentID] === undefined)\n        return\n      if (Object.keys(attendancesDict).includes(key)) {\n        attendancesDict[key].push({\n          firstName: studentsOfGroup[element.studentID].firstName,\n          lastName: studentsOfGroup[element.studentID].lastName,\n          status: element.attendanceStatus\n        })\n      }\n      else {\n        attendancesDict[key] = [{\n          firstName: studentsOfGroup[element.studentID].firstName,\n          lastName: studentsOfGroup[element.studentID].lastName,\n          status: element.attendanceStatus\n        }]\n      }\n    });\n    console.log(attendancesDict)\n    setAttendances(attendancesDict)\n  }\n\n  const handleCreate = async (groupName) => {\n    let xd = { name: groupName }\n    console.log(xd)\n    const response = await axios.post(\n      `http://${window.location.hostname}:8080/api/group`,\n      xd,\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    console.log(response)\n    alert(`Group: ${response.data.name} created!`)\n    getData()\n  };\n  const handleAssign = async (groupName) => {\n    let xd = user\n    xd.groupID = groupsID[groupName]\n    console.log(xd)\n    const response = await axios.put(\n      `http://${window.location.hostname}:8080/api/user`,\n      xd,\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    console.log(response)\n    getData()\n  };\n\n  const handleDelete = async (student) => {\n    student.groupID = null\n    console.log(student)\n    if (window.confirm(`Student ${student.firstName} ${student.lastName} will be deleted!`)) {\n      const response = await axios.put(\n        `http://${window.location.hostname}:8080/api/user`,\n        student,\n        { headers: { \"Content-Type\": \"application/json\" } }\n      );\n      console.log(response)\n    }\n    getData()\n  }\n\n  const handleAdd = async (student) => {\n    console.log(otherStudents[student])\n    let xd = {}\n    students.forEach((element) => {\n      if (otherStudents[student] === element.id) {\n        xd = element\n        xd.groupID = user.groupID\n      }\n    })\n    console.log(xd)\n    const response = await axios.put(\n      `http://${window.location.hostname}:8080/api/user`,\n      xd,\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    console.log(response)\n    getData()\n  }\n\n  const handleAddAttendance = async () => {\n    let subject = document.getElementById('subjectName').value\n    let attFrom = document.getElementById('attFrom').value\n    let attTo = document.getElementById('attTo').value\n    if (subject === '') {\n      window.alert('Subject cannot be empty!')\n      return\n    }\n    let att = {\n      nameOfSubject: subject,\n      attendanceFrom: attFrom.replaceAll('T', ' ').replaceAll('-', '/'),\n      attendanceTo: attTo.replaceAll('T', ' ').replaceAll('-', '/')\n    }\n    const response = await axios.post(\n      `http://${window.location.hostname}:8080/api/attendance/${user.groupID}`,\n      att,\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    console.log(response)\n    getData()\n  }\n\n  const handleDeleteAttendance = async (key) => {\n    let values = key.split(' - ')\n\n    let attendance = {\n      nameOfSubject: values[2],\n      attendanceFrom: values[0],\n      attendanceTo: values[1]\n    }\n    console.log(attendance)\n    await axios.delete(\n      `http://${window.location.hostname}:8080/api/attendance/`,\n      {\n        data: attendance,\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    );\n    getData()\n  }\n\n  const currentDate = new Date()\n  console.log(dateFormat(currentDate))\n  return (\n    <div className=\"container\">\n      <div className=\"left-panel\">\n        <div>\n          <span style={{ fontSize: 64, fontWeight: 300, marginBottom: 20, display: 'block' }}> ATList </span>\n          <Avatar {...stringAvatar(user.firstName + ' ' + user.lastName)} />\n          {user.firstName} {user.lastName} <br />\n          <span style={{ fontSize: 28, fontWeight: 300 }}> {groups[user.groupID - 1]} </span>\n        </div>\n        <br />\n      </div>\n      <div className=\"groups\">\n        <h3 style={{ paddingBottom: 0 }}>Group management</h3>\n        <div className='create'>\n          <TextField\n            id=\"name\"\n            label=\"Group name\"\n            type=\"name\"\n            variant=\"standard\"\n            style={{ margin: '10px 10px 10px calc(1em + 10px)', verticalAlign: 'inherit', width: 300 }}\n          />\n          <Button variant=\"contained\" onClick={() => handleCreate(document.getElementById('name').value)}>Create Group</Button>\n        </div>\n        <div className='delete'>\n          <div style={{ float: 'left' }}>\n            <Autocomplete\n              id=\"assign_group\"\n              options={groups}\n              disableClearable\n              renderInput={(params) => (\n                <TextField {...params} label=\"Group name\" variant=\"standard\" />\n              )}\n              style={{ margin: '10px 10px 10px calc(1em + 10px)', verticalAlign: 'inherit', width: 300 }}\n            />\n          </div>\n          <Button color=\"error\" style={{ float: 'left', margin: '23px 0' }} variant=\"outlined\" onClick={() => handleAssign(document.getElementById('assign_group').value)}>delete group</Button>\n        </div>\n        <div className='change'>\n          <div style={{ float: 'left' }}>\n            <Autocomplete\n              id=\"assign_group\"\n              options={groups}\n              disableClearable\n              renderInput={(params) => (\n                <TextField {...params} label=\"Group name\" variant=\"standard\" />\n              )}\n              style={{ margin: '10px 10px 10px calc(1em + 10px)', verticalAlign: 'inherit', width: 300 }}\n            />\n          </div>\n          <Button style={{ float: 'left', margin: '23px 0' }} variant=\"outlined\" onClick={() => handleAssign(document.getElementById('assign_group').value)}>Change group</Button>\n\n        </div>\n      </div>\n      <div className=\"students\">\n        <h3>Your students</h3>\n        {students.map((element) => {\n          if (element.role === 'student' && user.groupID !== null && element.groupID === user.groupID)\n            return (\n              <div className='student'>\n                {element.firstName} {element.lastName}\n                <Button\n                  style={{ position: 'absolute', right: 5 }}\n                  variant=\"outlined\"\n                  color=\"error\"\n                  onClick={() => handleDelete(element)}\n                >\n                  Delete\n                </Button>\n              </div>\n            )\n          else return null\n        })}\n        <div style={{ float: 'left' }}>\n          <Autocomplete\n            id=\"add_student\"\n            options={Object.keys(otherStudents)}\n            disableClearable\n            renderInput={(params) => (\n              <TextField {...params} label=\"Student\" variant=\"standard\" />\n            )}\n            style={{ margin: 10, verticalAlign: 'inherit', width: 260 }}\n          />\n        </div>\n        <Button style={{ position: 'absolute', right: 20, margin: '23px 0' }} variant=\"contained\" onClick={() => handleAdd(document.getElementById('add_student').value)}>add student</Button>\n      </div>\n      <div className=\"attendances\">\n        <h3>Attendance list</h3>\n        <TextField\n          required\n          label=\"Subject Name\"\n          id=\"subjectName\"\n          type=\"name\"\n          variant=\"standard\"\n          style={{ margin: '10px 10px 10px 1em', verticalAlign: 'inherit', width: 200 }}\n        />\n        <TextField\n          id=\"attFrom\"\n          label=\"Attendance From\"\n          type=\"datetime-local\"\n          defaultValue={dateFormat(currentDate)}\n          sx={{ width: 250 }}\n          InputLabelProps={{\n            shrink: true,\n          }}\n          style={{ margin: 10, verticalAlign: 'inherit', width: 250 }}\n        />\n        <TextField\n          id=\"attTo\"\n          label=\"Attendance To\"\n          type=\"datetime-local\"\n          defaultValue={dateFormat(currentDate)}\n          sx={{ width: 250 }}\n          InputLabelProps={{\n            shrink: true,\n          }}\n          style={{ margin: 10, verticalAlign: 'inherit', width: 250 }}\n        />\n        <Button variant=\"contained\" onClick={handleAddAttendance}>add attendance</Button>\n        <div>\n          {\n            Object.keys(attendance).map(key => {\n              return (\n                <div className='table-header'>\n                  <CalendarTodayIcon style={{ transform: 'translateY(2px)' }} /> {key}\n                  <Button\n                    style={{ position: 'absolute', right: 5 }}\n                    variant=\"outlined\"\n                    color=\"error\"\n                    onClick={() => handleDeleteAttendance(key)}\n                  >\n                    Delete\n                  </Button>\n                  {attendance[key].map(value => {\n                    return (\n                      <div className='table-cell'>\n                        <div className=\"names\">\n                          <span style={{ fontWeight: 400 }}>{Object.values(attendance[key]).indexOf(value) + 1}.</span> {value.firstName} {value.lastName}\n                        </div>\n                        <div className=\"status\">\n                          {value.status === null ? ' ? ' : value.status}\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              )\n            })\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}