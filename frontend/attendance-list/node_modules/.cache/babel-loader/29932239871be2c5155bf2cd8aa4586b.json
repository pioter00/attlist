{"ast":null,"code":"var _jsxFileName = \"/home/piotr/AttendanceListReact/attendance-list/src/student/Attendances.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport '../styles/student.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction dateFormat(date) {\n  let day = String(date.getDate()).padStart(2, '0');\n  let month = String(date.getMonth() + 1).padStart(2, '0');\n  let year = date.getFullYear();\n  let hour = String(date.getHours()).padStart(2, '0');\n  let minutes = String(date.getMinutes()).padStart(2, '0');\n  return `${year}/${month}/${day} ${hour}:${minutes}`;\n}\n\nexport default function Attendances(params) {\n  _s();\n\n  let {\n    id\n  } = useParams();\n  useEffect(() => {\n    const interval = setInterval(() => {\n      getData().then(disable);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const disable = () => {\n    const currentDate = new Date();\n    const rows = document.getElementsByClassName('attendance-entity');\n    let toDisable = {};\n\n    for (let item of rows) {\n      let dates = item.getElementsByClassName('entity-header')[0].children[0].innerText.split('-');\n      let curentDateString = dateFormat(currentDate);\n      if (curentDateString < dates[0].trim() || curentDateString > dates[1].trim()) toDisable[dates[0].trim()] = true;else toDisable[dates[0].trim()] = false;\n    }\n\n    console.log(toDisable);\n    setDisabled(toDisable);\n  };\n\n  const [attendance, setAttendances] = useState([]);\n  const [disabled, setDisabled] = useState({});\n\n  const getData = async () => {\n    let response = await axios.get(`http://${window.location.hostname}:8080/api/user/attendance/${id}`);\n    console.log(response);\n    setAttendances(response.data);\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    let status = data.get('status');\n    if (status === null) return;\n    let other = event.target.id.split('-');\n    let att = {\n      attendanceFrom: other[0],\n      attendanceTo: other[1],\n      attendanceStatus: status,\n      nameOfSubject: other[2],\n      id: parseInt(other[3]),\n      studentID: parseInt(other[4])\n    };\n    const response = await axios.put(`http://${window.location.hostname}:8080/api/attendance`, att, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    console.log(response);\n    window.alert(`You're ${status}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: attendance.map(element => {\n      return /*#__PURE__*/_jsxDEV(Box, {\n        id: `${element.attendanceFrom}-${element.attendanceTo}-${element.nameOfSubject}-${element.id}-${element.studentID}`,\n        className: \"attendance-entity\",\n        component: \"form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(CalendarTodayIcon, {\n          style: {\n            transform: 'translateY(5px)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"entity-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 700,\n              paddingRight: 20\n            },\n            children: [element.attendanceFrom, \" - \", element.attendanceTo, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), \" \", element.nameOfSubject]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          disabled: disabled[element.attendanceFrom],\n          component: \"fieldset\",\n          style: {\n            flexDirection: 'row',\n            position: 'absolute',\n            right: 20\n          },\n          children: [/*#__PURE__*/_jsxDEV(RadioGroup, {\n            row: true,\n            \"aria-label\": \"status\",\n            name: \"status\",\n            defaultValue: element.attendanceStatus,\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              id: \"absent\",\n              value: \"absent\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 71\n              }, this),\n              label: \"Absent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              id: \"late\",\n              value: \"late\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 67\n              }, this),\n              label: \"Late\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              id: \"present\",\n              value: \"present\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 73\n              }, this),\n              label: \"Present\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            type: \"submit\",\n            disabled: disabled[element.attendanceFrom],\n            children: \"confirm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Attendances, \"kbTTJyiLlhrqPIm9s42JxvEZvA8=\", false, function () {\n  return [useParams];\n});\n\n_c = Attendances;\n\nvar _c;\n\n$RefreshReg$(_c, \"Attendances\");","map":{"version":3,"sources":["/home/piotr/AttendanceListReact/attendance-list/src/student/Attendances.js"],"names":["React","useEffect","useState","axios","useParams","Radio","RadioGroup","FormControlLabel","FormControl","Button","Box","CalendarTodayIcon","dateFormat","date","day","String","getDate","padStart","month","getMonth","year","getFullYear","hour","getHours","minutes","getMinutes","Attendances","params","id","interval","setInterval","getData","then","disable","clearInterval","currentDate","Date","rows","document","getElementsByClassName","toDisable","item","dates","children","innerText","split","curentDateString","trim","console","log","setDisabled","attendance","setAttendances","disabled","response","get","window","location","hostname","data","handleSubmit","event","preventDefault","FormData","currentTarget","status","other","target","att","attendanceFrom","attendanceTo","attendanceStatus","nameOfSubject","parseInt","studentID","put","headers","alert","map","element","transform","fontWeight","paddingRight","flexDirection","position","right"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from 'react'\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport '../styles/student.css'\n\nfunction dateFormat(date) {\n  let day = String(date.getDate()).padStart(2, '0')\n  let month = String(date.getMonth() + 1).padStart(2, '0')\n  let year = date.getFullYear()\n  let hour = String(date.getHours()).padStart(2, '0')\n  let minutes = String(date.getMinutes()).padStart(2, '0')\n  return `${year}/${month}/${day} ${hour}:${minutes}`\n}\n\nexport default function Attendances(params) {\n  let { id } = useParams()\n  useEffect(() => {\n    const interval = setInterval(() => {\n      getData().then(disable);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  const disable = () => {\n    const currentDate = new Date()\n    const rows = document.getElementsByClassName('attendance-entity')\n    let toDisable = {}\n    for (let item of rows) {\n      let dates = item.getElementsByClassName('entity-header')[0].children[0].innerText.split('-')\n      let curentDateString = dateFormat(currentDate)\n\n      if (curentDateString < dates[0].trim() || curentDateString > dates[1].trim())\n        toDisable[dates[0].trim()] = true\n      else\n        toDisable[dates[0].trim()] = false\n    }\n    console.log(toDisable)\n    setDisabled(toDisable)\n\n  }\n\n  const [attendance, setAttendances] = useState([]);\n  const [disabled, setDisabled] = useState({});\n  const getData = async () => {\n    let response = await axios.get(`http://${window.location.hostname}:8080/api/user/attendance/${id}`)\n    console.log(response)\n    setAttendances(response.data)\n  }\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    let status = data.get('status')\n    if (status === null)\n      return\n    let other = event.target.id.split('-')\n    let att = {\n      attendanceFrom: other[0],\n      attendanceTo: other[1],\n      attendanceStatus: status,\n      nameOfSubject: other[2],\n      id: parseInt(other[3]),\n      studentID: parseInt(other[4])\n    }\n    const response = await axios.put(\n      `http://${window.location.hostname}:8080/api/attendance`,\n      att,\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    console.log(response)\n    window.alert(`You're ${status}`)\n  }\n\n  return (\n    <div>\n      {attendance.map((element) => {\n        return (\n          <Box\n            id={`${element.attendanceFrom}-${element.attendanceTo}-${element.nameOfSubject}-${element.id}-${element.studentID}`}\n            className=\"attendance-entity\"\n            component=\"form\"\n            onSubmit={handleSubmit}\n          >\n            <CalendarTodayIcon style={{ transform: 'translateY(5px)' }} />\n            <div className=\"entity-header\">\n              <span style={{ fontWeight: 700, paddingRight: 20 }}>{element.attendanceFrom} - {element.attendanceTo} </span> {element.nameOfSubject}\n            </div>\n            <FormControl disabled={disabled[element.attendanceFrom]} component=\"fieldset\" style={{ flexDirection: 'row', position: 'absolute', right: 20 }} >\n              <RadioGroup row aria-label=\"status\" name='status' defaultValue={element.attendanceStatus}>\n                <FormControlLabel id=\"absent\" value=\"absent\" control={<Radio />} label=\"Absent\" />\n                <FormControlLabel id=\"late\" value=\"late\" control={<Radio />} label=\"Late\" />\n                <FormControlLabel id=\"present\" value=\"present\" control={<Radio />} label=\"Present\" />\n              </RadioGroup>\n              <Button variant=\"contained\" type='submit' disabled={disabled[element.attendanceFrom]}>confirm</Button>\n            </FormControl>\n          </Box>\n        )\n      })}\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}